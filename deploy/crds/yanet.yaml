apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.12.0
  name: yanetconfigs.yanet.yanet-platform.io
spec:
  group: yanet.yanet-platform.io
  names:
    kind: YanetConfig
    listKind: YanetConfigList
    plural: yanetconfigs
    singular: yanetconfig
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        description: YanetConfig is the Schema for the yanetconfigs API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation of an object. Servers should convert recognized schemas to the latest internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this object represents. Servers may infer this from the endpoint the client submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: YanetConfigSpec defines the desired state of YanetConfig
            properties:
              autodiscovery:
                description: (Optional) AutoDiscovery configure new worker node initializer.
                properties:
                  archuri:
                    description: '(Optional) Uri for arc resolver. This uri get arch by node name. Example: `curl localhost:80/arch/test.yanet-platform.io` -> corei7'
                    type: string
                  configsuri:
                    description: '(Optional) Uri for configs version resolver. This uri get configs version by yanet version. e.g. revision of git repo Example: `curl localhost:80/configs/51.2` -> 13162235'
                    type: string
                  enable:
                    default: false
                    description: '(Optional) Enable or disable discovery. Default: false'
                    type: boolean
                  images:
                    description: Images name for deployments.
                    properties:
                      announcer:
                        default: announcer
                        description: '(Optional) Announcer image name. Default: announcer'
                        type: string
                      bird:
                        default: bird
                        description: '(Optional) Bird image name. Default: bird'
                        type: string
                      controlplane:
                        default: controlplane
                        description: '(Optional) Controlplane image name. Default: controlplane'
                        type: string
                      dataplane:
                        default: dataplane
                        description: '(Optional) Dataplane image name. Default: dataplane'
                        type: string
                    type: object
                  namespace:
                    default: default
                    description: '(Optional) Namespace for new autogenerated Yanet object. Default: default'
                    type: string
                  registry:
                    default: dockerhub.io
                    description: '(Optional) registry for new autogenerated Yanet object. Default: dockerhub.io'
                    type: string
                  typeuri:
                    description: '(Optional) Uri for node type resolver. This uri get node type by node name. Example: `curl localhost:80/type/test.yanet-platform.io` -> release Node will be ignored if the return values is "none".'
                    type: string
                  versionuri:
                    description: '(Optional) Uri for yanet version resolver. This uri get yanet version(aka docker tag) by node name. Example: `curl localhost:80/version/yanet/yanet-platform.io` -> 51.2'
                    type: string
                type: object
              stop:
                default: false
                description: '(Optional) Stop means global stop. Do nothing in main reconcile loop. When turned off, the operator may skip some events. When turned on, we recommend restarting. Default: false'
                type: boolean
            type: object
          status:
            description: YanetConfigStatus defines the observed state of YanetConfig
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.12.0
  name: yanets.yanet.yanet-platform.io
spec:
  group: yanet.yanet-platform.io
  names:
    kind: Yanet
    listKind: YanetList
    plural: yanets
    singular: yanet
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        description: Yanet is the Schema for the yanets API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation of an object. Servers should convert recognized schemas to the latest internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this object represents. Servers may infer this from the endpoint the client submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: YanetSpec defines the desired state of Yanet
            properties:
              allowreboot:
                default: false
                description: '(Optional) Allow reboot on prepare stage. Default: false'
                type: boolean
              announcer:
                description: (Optional) base configs for announcer deployment.
                properties:
                  enable:
                    default: true
                    description: '(Optional) replicas for this deployment. One with true options and zero with false. You can make deployment with zero replicas with this option. Default: true'
                    type: boolean
                  image:
                    description: image name.
                    type: string
                  initcontainers:
                    description: (Optional) Addition init containers.
                    items:
                      description: Base configs for init container.
                      properties:
                        args:
                          description: (Optional) Args.
                          items:
                            type: string
                          type: array
                        command:
                          description: Command.
                          items:
                            type: string
                          type: array
                        image:
                          description: Full image name.
                          type: string
                        name:
                          description: Container name.
                          type: string
                        privileged:
                          default: false
                          description: '(Optional) make container privileged. Default: false.'
                          type: boolean
                        volumemounts:
                          description: '(Optional) VolumeMounts. Available volumes: "/dev/hugepages", "/var", "/etc", "/run/yanet", "/run/bird"'
                          items:
                            type: string
                          type: array
                      type: object
                    type: array
                type: object
              arch:
                default: corei7
                description: '(Optional) Arch of dataplane(broadwell, corei7 or knl). Default: corei7'
                type: string
              autosync:
                default: false
                description: '(Optional) Operator enable autosync for this node. Default: false'
                type: boolean
              bird:
                description: (Optional) base configs for bird deployment.
                properties:
                  enable:
                    default: true
                    description: '(Optional) replicas for this deployment. One with true options and zero with false. You can make deployment with zero replicas with this option. Default: true'
                    type: boolean
                  image:
                    description: image name
                    type: string
                  tag:
                    default: latest
                    description: '(Optional) image tag. Default: latest.'
                    type: string
                type: object
              controlplane:
                description: (Optional) base configs for contorlplane deployment.
                properties:
                  enable:
                    default: true
                    description: '(Optional) replicas for this deployment. One with true options and zero with false. You can make deployment with zero replicas with this option. Default: true'
                    type: boolean
                  image:
                    description: image name.
                    type: string
                  initcontainers:
                    description: (Optional) Addition init containers.
                    items:
                      description: Base configs for init container.
                      properties:
                        args:
                          description: (Optional) Args.
                          items:
                            type: string
                          type: array
                        command:
                          description: Command.
                          items:
                            type: string
                          type: array
                        image:
                          description: Full image name.
                          type: string
                        name:
                          description: Container name.
                          type: string
                        privileged:
                          default: false
                          description: '(Optional) make container privileged. Default: false.'
                          type: boolean
                        volumemounts:
                          description: '(Optional) VolumeMounts. Available volumes: "/dev/hugepages", "/var", "/etc", "/run/yanet", "/run/bird"'
                          items:
                            type: string
                          type: array
                      type: object
                    type: array
                type: object
              dataplane:
                description: (Optional) base configs for dataplane deployment.
                properties:
                  enable:
                    default: true
                    description: '(Optional) replicas for this deployment. One with true options and zero with false. You can make deployment with zero replicas with this option. Default: true'
                    type: boolean
                  image:
                    description: image name.
                    type: string
                  initcontainers:
                    description: (Optional) Addition init containers.
                    items:
                      description: Base configs for init container.
                      properties:
                        args:
                          description: (Optional) Args.
                          items:
                            type: string
                          type: array
                        command:
                          description: Command.
                          items:
                            type: string
                          type: array
                        image:
                          description: Full image name.
                          type: string
                        name:
                          description: Container name.
                          type: string
                        privileged:
                          default: false
                          description: '(Optional) make container privileged. Default: false.'
                          type: boolean
                        volumemounts:
                          description: '(Optional) VolumeMounts. Available volumes: "/dev/hugepages", "/var", "/etc", "/run/yanet", "/run/bird"'
                          items:
                            type: string
                          type: array
                      type: object
                    type: array
                type: object
              nodename:
                description: Worker node name for deploy. Only one Yanet on node! Do not use regex!
                type: string
              preparejob:
                description: (Optional) oneshot host prepare job.
                properties:
                  enable:
                    default: true
                    description: '(Optional) replicas for this deployment. One with true options and zero with false. You can make deployment with zero replicas with this option. Default: true'
                    type: boolean
                  image:
                    description: image name
                    type: string
                  tag:
                    default: latest
                    description: '(Optional) image tag. Default: latest.'
                    type: string
                type: object
              registry:
                description: (Optional) Global docker registry.
                type: string
              tag:
                default: latest
                description: '(Optional) Tag for dataplane/controlplane/anouncer/bird images. Default: latest'
                type: string
              type:
                default: release
                description: '(Optional) Type of dataplane(release, l3balancer or firewall). Default: release'
                type: string
            type: object
          status:
            description: YanetStatus defines the observed state of Yanet.
            properties:
              pods:
                description: Resulting pods.
                items:
                  type: string
                type: array
            required:
            - pods
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
